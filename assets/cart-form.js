!function(){Shopify.theme=Shopify.theme||{},Shopify.theme.cart=Shopify.theme.cart||{},Shopify.theme.cart.sections=Shopify.theme.cart.sections||[];class e extends HTMLElement{constructor(){super()}connectedCallback(){let e=this.querySelectorAll('[name="updates[]"]'),t=this.querySelectorAll('[name="line-item-remove"]');Shopify.theme.cart.sections.push(this.section),e.forEach(e=>{e.addEventListener("change",async t=>{this.loading=!0;let i=await Shopify.theme.cart.update({updates:{[e.dataset.lineItemKey]:Number(e.value)}},{events:!0});this.updateView(i.sections[this.section])})}),t.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),this.removeByUrl(e.href)})}),window.addEventListener("cart:add",e=>{this.updateView(e.detail?.sections[this.section]),this.querySelectorAll("[data-cart-success]").forEach(e=>{e.show(),setTimeout(()=>{e.hide()},1e4)})})}get section(){return this.getAttribute("section")||"cart-main"}removeByUrl(e){this.loading=!0;let t=new URL(e);t.searchParams.append("sections",this.section),fetch(`${t}`,{headers:{Accept:"application/json"}}).then(e=>e.json()).then(e=>{this.updateView(e.sections[this.section]),this.loading=!1}).catch(e=>{console.error(e),this.loading=!1})}updateView(e){this.loading=!0;let t=document.createElement("div");t.innerHTML=e.trim();let i=t.querySelector("cart-form");this.replaceWith(i),window.dispatchEvent(new CustomEvent("cart:updated")),this.loading=!1}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get loading(){return this.hasAttribute("loading")}static get observedAttributes(){return[]}attributeChangedCallback(e,t,i){t!==i&&(this[e]=i)}}customElements.define("cart-form",e)}();
//# sourceMappingURL=cart-form.js.map
