!function(){class t extends HTMLElement{constructor(){super()}updateDeepLinking(t){let e=new URL(location.href),i=new URL(t,location.origin);e.searchParams.forEach((t,e)=>{e.includes("filter")||i.searchParams.set(e,t)}),history.replaceState(null,"",i.href)}updateDOM(t){this.updateDeepLinking(t);let e=this.closest("[data-section-id]");if(e){let i=e.dataset.sectionId;if(i&&t){e.classList.add("loading");let s=new URL(t,location.origin);s.searchParams.set("section_id",i),fetch(s.href,{credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},method:"GET"}).then(t=>t.text()).then(t=>{let i=document.createElement("template");i.innerHTML=t.trim(),console.log("handle response TODO",i.content),e.classList.remove("loading")}).catch(function(t){e.classList.remove("loading"),console.error(t)})}}}}customElements.define("filter-value-price-range",class extends t{constructor(){super()}connectedCallback(){this.updateUrl=this.getAttribute("update-url"),this.fromSlider=this.querySelector("#fromRange"),this.toSlider=this.querySelector("#toRange"),this.fromInput=this.querySelector("#fromValue"),this.toInput=this.querySelector("#toValue"),this.fillSlider(this.fromSlider,this.toSlider,"rgba(25,10,0, 0.15)","var(--color-primary, #000)",this.toSlider),this.setToggleAccessible(this.toSlider),this.fromSlider.addEventListener("input",this.controlFromSlider.bind(this)),this.toSlider.addEventListener("input",this.controlToSlider.bind(this)),this.fromInput.addEventListener("input",this.controlFromInput.bind(this)),this.toInput.addEventListener("input",this.controlToInput.bind(this)),this.fromSlider.addEventListener("input",this.debounce(this.handleInput.bind(this),500)),this.toSlider.addEventListener("input",this.debounce(this.handleInput.bind(this),500)),this.fromInput.addEventListener("input",this.debounce(this.handleInput.bind(this),500)),this.toInput.addEventListener("input",this.debounce(this.handleInput.bind(this),500))}debounce(t,e){let i;let s=this;return(...r)=>{clearTimeout(i),i=setTimeout(()=>t.apply(s,r),e)}}handleInput(){let t=this.updateUrl,e=Number(this.toInput.max)?Number(this.toInput.max):1e6,i=this.fromInput.value,s=this.toInput.value;t.includes("?")?i&&i>0&&(t+=`&filter.v.price.gte=${i}`):i&&i>0&&(t+=`?filter.v.price.gte=${this.fromInput.value}`),t.includes("?")?s&&s<e&&(t+=`&filter.v.price.lte=${s}`):s&&s<e&&(t+=`?filter.v.price.lte=${s}`),super.updateDOM(t)}controlFromInput(){let[t,e]=this.getParsed(this.fromInput,this.toInput);this.fillSlider(this.fromInput,this.toInput,"rgba(25,10,0, 0.15)","var(--color-primary, #000)",this.toSlider),t>e?(this.fromSlider.value=e,this.fromInput.value=e):this.fromSlider.value=t}controlToInput(){let[t,e]=this.getParsed(this.fromInput,this.toInput);this.fillSlider(this.fromInput,this.toInput,"rgba(25,10,0, 0.15)","var(--color-primary, #000)",this.toSlider),this.setToggleAccessible(this.toInput),t<=e?(this.toSlider.value=e,this.toInput.value=e):this.toInput.value=t}controlFromSlider(){let[t,e]=this.getParsed(this.fromSlider,this.toSlider);this.fillSlider(this.fromSlider,this.toSlider,"rgba(25,10,0, 0.15)","var(--color-primary, #000)",this.toSlider),t>e?(this.fromSlider.value=e,this.fromInput.value=e):this.fromInput.value=t}controlToSlider(){let[t,e]=this.getParsed(this.fromSlider,this.toSlider);this.fillSlider(this.fromSlider,this.toSlider,"rgba(25,10,0, 0.15)","var(--color-primary, #000)",this.toSlider),this.setToggleAccessible(this.toSlider),t<=e?(this.toSlider.value=e,this.toInput.value=e):(this.toInput.value=t,this.toSlider.value=t)}getParsed(t,e){return[parseInt(t.value,10),parseInt(e.value,10)]}fillSlider(t,e,i,s,r){let l=e.max-e.min,n=t.value-e.min,o=e.value-e.min;r.style.background=`linear-gradient(
      to right,
      ${i} 0%,
      ${i} ${n/l*100}%,
      ${s} ${n/l*100}%,
      ${s} ${o/l*100}%, 
      ${i} ${o/l*100}%, 
      ${i} 100%)`}setToggleAccessible(t){let e=this.querySelector("#toRange");0>=Number(t.value)?e.style.zIndex=2:e.style.zIndex=0}}),customElements.define("filter-value-boolean",class extends t{constructor(){super()}connectedCallback(){this.addEventListener("click",()=>{let t=this.getAttribute("update-url");t&&super.updateDOM(t)})}}),customElements.define("filter-value-list",class extends t{constructor(){super()}connectedCallback(){this.addEventListener("click",()=>{let t=this.getAttribute("update-url");t&&super.updateDOM(t)})}}),customElements.define("filter-value-remove",class extends t{constructor(){super()}connectedCallback(){this.addEventListener("click",()=>{let t=this.getAttribute("update-url");t&&super.updateDOM(t)})}});class e extends HTMLElement{constructor(){super()}updateDOM(t){let e=this.closest("[data-section-id]");if(e){e.classList.add("loading");let i=e.dataset.sectionId;if(i&&t){let s=new URL(t,location.origin);s.searchParams.set("section_id",i),fetch(s.href,{credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},method:"GET"}).then(t=>t.text()).then(t=>{let i=document.createElement("template");i.innerHTML=t.trim(),console.log("handle response TODO",i.content),e.classList.remove("loading")}).catch(function(t){e.classList.remove("loading"),console.error(t)})}}}connectedCallback(){this.validateItems(),this.addEventListener("click",()=>{let t=this.getAttribute("paginate-next");t&&this.updateDOM(t)})}}customElements.define("pagination-next",e)}();
//# sourceMappingURL=filter.js.map
