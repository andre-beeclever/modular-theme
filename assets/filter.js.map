{"mappings":"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","sources":["<anon>","src/js/filter.js"],"sourcesContent":["(function () {\nclass $6142fea1849c7fbd$var$FilterValue extends HTMLElement {\n    constructor(){\n        super();\n    }\n    updateDeepLinking(url) {\n        const currentURL = new URL(location.href);\n        const newURL = new URL(url, location.origin);\n        // übernehme alle parameter die nichts mit dem filter zu tun haben\n        currentURL.searchParams.forEach((value, key)=>{\n            if (!key.includes(\"filter\")) newURL.searchParams.set(key, value);\n        });\n        history.replaceState(null, \"\", newURL.href);\n    }\n    updateDOM(url) {\n        this.updateDeepLinking(url);\n        const section = this.closest(\"[data-section-id]\");\n        if (!!section) {\n            const section_id = section.dataset.sectionId;\n            if (!!section_id && !!url) {\n                section.classList.add(\"loading\");\n                const fetch_url = new URL(url, location.origin);\n                fetch_url.searchParams.set(\"section_id\", section_id);\n                fetch(fetch_url.href, {\n                    credentials: \"same-origin\",\n                    headers: {\n                        \"X-Requested-With\": \"XMLHttpRequest\"\n                    },\n                    method: \"GET\"\n                }).then((response)=>response.text()).then((data)=>{\n                    const template = document.createElement(\"template\");\n                    template.innerHTML = data.trim();\n                    console.log(\"handle response TODO\", template.content);\n                    // TODO\n                    // handle response and update\n                    section.classList.remove(\"loading\");\n                }).catch(function(err) {\n                    section.classList.remove(\"loading\");\n                    console.error(err);\n                });\n            }\n        }\n    }\n}\nclass $6142fea1849c7fbd$var$FilterValuePriceRange extends $6142fea1849c7fbd$var$FilterValue {\n    constructor(){\n        super();\n    }\n    connectedCallback() {\n        this.updateUrl = this.getAttribute(\"update-url\");\n        this.fromSlider = this.querySelector(\"#fromRange\");\n        this.toSlider = this.querySelector(\"#toRange\");\n        this.fromInput = this.querySelector(\"#fromValue\");\n        this.toInput = this.querySelector(\"#toValue\");\n        this.fillSlider(this.fromSlider, this.toSlider, \"rgba(25,10,0, 0.15)\", \"var(--color-primary, #000)\", this.toSlider);\n        this.setToggleAccessible(this.toSlider);\n        this.fromSlider.addEventListener(\"input\", this.controlFromSlider.bind(this));\n        this.toSlider.addEventListener(\"input\", this.controlToSlider.bind(this));\n        this.fromInput.addEventListener(\"input\", this.controlFromInput.bind(this));\n        this.toInput.addEventListener(\"input\", this.controlToInput.bind(this));\n        this.fromSlider.addEventListener(\"input\", this.debounce(this.handleInput.bind(this), 500));\n        this.toSlider.addEventListener(\"input\", this.debounce(this.handleInput.bind(this), 500));\n        this.fromInput.addEventListener(\"input\", this.debounce(this.handleInput.bind(this), 500));\n        this.toInput.addEventListener(\"input\", this.debounce(this.handleInput.bind(this), 500));\n    }\n    debounce(fn, wait) {\n        const that = this;\n        let t;\n        return (...args)=>{\n            clearTimeout(t);\n            t = setTimeout(()=>fn.apply(that, args), wait);\n        };\n    }\n    handleInput() {\n        const that = this;\n        let url = that.updateUrl;\n        const range_min = 0;\n        const range_max = Number(that.toInput.max) ? Number(that.toInput.max) : 1000000;\n        const min = that.fromInput.value;\n        const max = that.toInput.value;\n        if (url.includes(\"?\")) {\n            if (!!min && min > range_min) url += `&filter.v.price.gte=${min}`;\n        } else if (!!min && min > range_min) url += `?filter.v.price.gte=${that.fromInput.value}`;\n        if (url.includes(\"?\")) {\n            if (!!max && max < range_max) url += `&filter.v.price.lte=${max}`;\n        } else if (!!max && max < range_max) url += `?filter.v.price.lte=${max}`;\n        super.updateDOM(url);\n    }\n    controlFromInput() {\n        const that = this;\n        const [from, to] = that.getParsed(that.fromInput, that.toInput);\n        that.fillSlider(that.fromInput, that.toInput, \"rgba(25,10,0, 0.15)\", \"var(--color-primary, #000)\", that.toSlider);\n        if (from > to) {\n            that.fromSlider.value = to;\n            that.fromInput.value = to;\n        } else that.fromSlider.value = from;\n    }\n    controlToInput() {\n        const that = this;\n        const [from, to] = that.getParsed(that.fromInput, that.toInput);\n        that.fillSlider(that.fromInput, that.toInput, \"rgba(25,10,0, 0.15)\", \"var(--color-primary, #000)\", that.toSlider);\n        that.setToggleAccessible(that.toInput);\n        if (from <= to) {\n            that.toSlider.value = to;\n            that.toInput.value = to;\n        } else that.toInput.value = from;\n    }\n    controlFromSlider() {\n        const that = this;\n        const [from, to] = that.getParsed(that.fromSlider, that.toSlider);\n        that.fillSlider(that.fromSlider, that.toSlider, \"rgba(25,10,0, 0.15)\", \"var(--color-primary, #000)\", that.toSlider);\n        if (from > to) {\n            that.fromSlider.value = to;\n            that.fromInput.value = to;\n        } else that.fromInput.value = from;\n    }\n    controlToSlider() {\n        const that = this;\n        const [from, to] = that.getParsed(that.fromSlider, that.toSlider);\n        that.fillSlider(that.fromSlider, that.toSlider, \"rgba(25,10,0, 0.15)\", \"var(--color-primary, #000)\", that.toSlider);\n        that.setToggleAccessible(that.toSlider);\n        if (from <= to) {\n            that.toSlider.value = to;\n            that.toInput.value = to;\n        } else {\n            that.toInput.value = from;\n            that.toSlider.value = from;\n        }\n    }\n    getParsed(currentFrom, currentTo) {\n        const from = parseInt(currentFrom.value, 10);\n        const to = parseInt(currentTo.value, 10);\n        return [\n            from,\n            to\n        ];\n    }\n    fillSlider(from, to, sliderColor, rangeColor, controlSlider) {\n        const rangeDistance = to.max - to.min;\n        const fromPosition = from.value - to.min;\n        const toPosition = to.value - to.min;\n        controlSlider.style.background = `linear-gradient(\n      to right,\n      ${sliderColor} 0%,\n      ${sliderColor} ${fromPosition / rangeDistance * 100}%,\n      ${rangeColor} ${fromPosition / rangeDistance * 100}%,\n      ${rangeColor} ${toPosition / rangeDistance * 100}%, \n      ${sliderColor} ${toPosition / rangeDistance * 100}%, \n      ${sliderColor} 100%)`;\n    }\n    setToggleAccessible(currentTarget) {\n        const that = this;\n        const toSlider = that.querySelector(\"#toRange\");\n        if (Number(currentTarget.value) <= 0) toSlider.style.zIndex = 2;\n        else toSlider.style.zIndex = 0;\n    }\n}\ncustomElements.define(\"filter-value-price-range\", $6142fea1849c7fbd$var$FilterValuePriceRange);\nclass $6142fea1849c7fbd$var$FilterValueBoolean extends $6142fea1849c7fbd$var$FilterValue {\n    constructor(){\n        super();\n    }\n    connectedCallback() {\n        this.addEventListener(\"click\", ()=>{\n            const url = this.getAttribute(\"update-url\");\n            if (!!url) super.updateDOM(url);\n        });\n    }\n}\ncustomElements.define(\"filter-value-boolean\", $6142fea1849c7fbd$var$FilterValueBoolean);\nclass $6142fea1849c7fbd$var$FilterValueList extends $6142fea1849c7fbd$var$FilterValue {\n    constructor(){\n        super();\n    }\n    connectedCallback() {\n        this.addEventListener(\"click\", ()=>{\n            const url = this.getAttribute(\"update-url\");\n            if (!!url) super.updateDOM(url);\n        });\n    }\n}\ncustomElements.define(\"filter-value-list\", $6142fea1849c7fbd$var$FilterValueList);\nclass $6142fea1849c7fbd$var$FilterValueRemove extends $6142fea1849c7fbd$var$FilterValue {\n    constructor(){\n        super();\n    }\n    connectedCallback() {\n        this.addEventListener(\"click\", ()=>{\n            const url = this.getAttribute(\"update-url\");\n            if (!!url) super.updateDOM(url);\n        });\n    }\n}\ncustomElements.define(\"filter-value-remove\", $6142fea1849c7fbd$var$FilterValueRemove);\nclass $6142fea1849c7fbd$var$PaginationNext extends HTMLElement {\n    constructor(){\n        super();\n    }\n    updateDOM(url) {\n        const section = this.closest(\"[data-section-id]\");\n        if (!!section) {\n            section.classList.add(\"loading\");\n            const section_id = section.dataset.sectionId;\n            if (!!section_id && !!url) {\n                const fetch_url = new URL(url, location.origin);\n                fetch_url.searchParams.set(\"section_id\", section_id);\n                fetch(fetch_url.href, {\n                    credentials: \"same-origin\",\n                    headers: {\n                        \"X-Requested-With\": \"XMLHttpRequest\"\n                    },\n                    method: \"GET\"\n                }).then((response)=>response.text()).then((data)=>{\n                    const template = document.createElement(\"template\");\n                    template.innerHTML = data.trim();\n                    console.log(\"handle response TODO\", template.content);\n                    // TODO\n                    // handle response and update\n                    section.classList.remove(\"loading\");\n                }).catch(function(err) {\n                    section.classList.remove(\"loading\");\n                    console.error(err);\n                });\n            }\n        }\n    }\n    connectedCallback() {\n        this.validateItems();\n        this.addEventListener(\"click\", ()=>{\n            const url = this.getAttribute(\"paginate-next\");\n            if (!!url) this.updateDOM(url);\n        });\n    }\n}\ncustomElements.define(\"pagination-next\", $6142fea1849c7fbd$var$PaginationNext);\n\n})();\n//# sourceMappingURL=filter.js.map\n","class FilterValue extends HTMLElement {\n  constructor() {\n    super();\n  }\n  updateDeepLinking(url) {\n    const currentURL = new URL(location.href);\n    const newURL = new URL(url, location.origin);\n    // übernehme alle parameter die nichts mit dem filter zu tun haben\n    currentURL.searchParams.forEach((value, key) => {\n      if(!key.includes('filter')){\n        newURL.searchParams.set(key, value);\n      }\n    });\n    history.replaceState(null, '', newURL.href);\n  }\n  updateDOM(url){\n    this.updateDeepLinking(url);\n    const section = this.closest('[data-section-id]');\n    if(!!section) {\n      const section_id = section.dataset.sectionId;\n      if(!!section_id && !!url){\n        section.classList.add('loading');\n        const fetch_url = new URL(url, location.origin);\n        fetch_url.searchParams.set('section_id', section_id);\n        fetch(fetch_url.href, {\n          credentials: 'same-origin',\n          headers: {'X-Requested-With': 'XMLHttpRequest'},\n          method: 'GET'\n        })\n        .then(response => response.text())\n        .then(data => {\n          const template = document.createElement('template');\n          template.innerHTML = data.trim();\n          console.log('handle response TODO', template.content);\n          // TODO\n          // handle response and update\n          section.classList.remove('loading');\n        }).catch(function(err) {\n          section.classList.remove('loading');\n          console.error(err);\n        });\n      }\n    }\n  }\n}\n\nclass FilterValuePriceRange extends FilterValue {\n  constructor() {\n    super();\n  }\n  connectedCallback() {\n    this.updateUrl = this.getAttribute('update-url');\n    this.fromSlider = this.querySelector('#fromRange');\n    this.toSlider = this.querySelector('#toRange');\n    this.fromInput = this.querySelector('#fromValue');\n    this.toInput = this.querySelector('#toValue');\n    this.fillSlider(this.fromSlider, this.toSlider, 'rgba(25,10,0, 0.15)', 'var(--color-primary, #000)', this.toSlider);\n    this.setToggleAccessible(this.toSlider);\n    this.fromSlider.addEventListener('input', this.controlFromSlider.bind(this));\n    this.toSlider.addEventListener('input', this.controlToSlider.bind(this));\n    this.fromInput.addEventListener('input', this.controlFromInput.bind(this));\n    this.toInput.addEventListener('input', this.controlToInput.bind(this));\n    this.fromSlider.addEventListener('input', this.debounce(this.handleInput.bind(this), 500));\n    this.toSlider.addEventListener('input', this.debounce(this.handleInput.bind(this), 500));\n    this.fromInput.addEventListener('input', this.debounce(this.handleInput.bind(this), 500));\n    this.toInput.addEventListener('input', this.debounce(this.handleInput.bind(this), 500));\n  }\n  debounce(fn, wait) {\n    const that = this; \n    let t;\n    return (...args) => {\n      clearTimeout(t);\n      t = setTimeout(() => fn.apply(that, args), wait);\n    };\n  }\n  handleInput() {\n    const that = this;\n    let url = that.updateUrl;\n    const range_min = 0;\n    const range_max = Number(that.toInput.max) ? Number(that.toInput.max) : 1000000;\n    const min = that.fromInput.value;\n    const max = that.toInput.value;\n    if(url.includes('?')){\n      if(!!min && min > range_min){\n        url += `&filter.v.price.gte=${min}`\n      }\n    } else {\n      if(!!min && min > range_min){\n        url += `?filter.v.price.gte=${that.fromInput.value}`\n      }\n    }\n    if(url.includes('?')){\n      if(!!max && max < range_max){\n        url += `&filter.v.price.lte=${max}`\n      }\n    } else {\n      if(!!max && max < range_max){\n        url += `?filter.v.price.lte=${max}`\n      }\n    }\n    super.updateDOM(url);\n  }\n  controlFromInput() {\n    const that = this;\n    const [from, to] = that.getParsed(that.fromInput, that.toInput);\n    that.fillSlider(that.fromInput, that.toInput, 'rgba(25,10,0, 0.15)', 'var(--color-primary, #000)', that.toSlider);\n    if (from > to) {\n      that.fromSlider.value = to;\n      that.fromInput.value = to;\n    } else {\n      that.fromSlider.value = from;\n    }\n  }\n  controlToInput() {\n    const that = this;\n    const [from, to] = that.getParsed(that.fromInput, that.toInput);\n    that.fillSlider(that.fromInput, that.toInput, 'rgba(25,10,0, 0.15)', 'var(--color-primary, #000)', that.toSlider);\n    that.setToggleAccessible(that.toInput);\n    if (from <= to) {\n      that.toSlider.value = to;\n      that.toInput.value = to;\n    } else {\n      that.toInput.value = from;\n    }\n  }\n  controlFromSlider() {\n    const that = this;\n    const [from, to] = that.getParsed(that.fromSlider, that.toSlider);\n    that.fillSlider(that.fromSlider, that.toSlider, 'rgba(25,10,0, 0.15)', 'var(--color-primary, #000)', that.toSlider);\n    if (from > to) {\n      that.fromSlider.value = to;\n      that.fromInput.value = to;\n    } else {\n      that.fromInput.value = from;\n    }\n  }\n  controlToSlider() {\n    const that = this;\n    const [from, to] = that.getParsed(that.fromSlider, that.toSlider);\n    that.fillSlider(that.fromSlider, that.toSlider, 'rgba(25,10,0, 0.15)', 'var(--color-primary, #000)', that.toSlider);\n    that.setToggleAccessible(that.toSlider);\n    if (from <= to) {\n      that.toSlider.value = to;\n      that.toInput.value = to;\n    } else {\n      that.toInput.value = from;\n      that.toSlider.value = from;\n    }\n  }\n  getParsed(currentFrom, currentTo) {\n    const from = parseInt(currentFrom.value, 10);\n    const to = parseInt(currentTo.value, 10);\n    return [from, to];\n  }\n  fillSlider(from, to, sliderColor, rangeColor, controlSlider) {\n    const rangeDistance = to.max-to.min;\n    const fromPosition = from.value - to.min;\n    const toPosition = to.value - to.min;\n    controlSlider.style.background = `linear-gradient(\n      to right,\n      ${sliderColor} 0%,\n      ${sliderColor} ${(fromPosition)/(rangeDistance)*100}%,\n      ${rangeColor} ${((fromPosition)/(rangeDistance))*100}%,\n      ${rangeColor} ${(toPosition)/(rangeDistance)*100}%, \n      ${sliderColor} ${(toPosition)/(rangeDistance)*100}%, \n      ${sliderColor} 100%)`;\n  }\n  setToggleAccessible(currentTarget) {\n    const that = this;\n    const toSlider = that.querySelector('#toRange');\n    if (Number(currentTarget.value) <= 0 ) {\n      toSlider.style.zIndex = 2;\n    } else {\n      toSlider.style.zIndex = 0;\n    }\n  }\n}\ncustomElements.define('filter-value-price-range', FilterValuePriceRange);\n\nclass FilterValueBoolean extends FilterValue {\n  constructor() {\n    super();\n  }\n  connectedCallback() {\n    this.addEventListener('click', () => {\n      const url = this.getAttribute('update-url');\n      if(!!url){\n        super.updateDOM(url);\n      }\n    });\n  }\n}\ncustomElements.define('filter-value-boolean', FilterValueBoolean);\n\nclass FilterValueList extends FilterValue {\n  constructor() {\n    super();\n  }\n  connectedCallback() {\n    this.addEventListener('click', () => {\n      const url = this.getAttribute('update-url');\n      if(!!url){\n        super.updateDOM(url);\n      }\n    });\n  }\n}\ncustomElements.define('filter-value-list', FilterValueList);\n\nclass FilterValueRemove extends FilterValue {\n  constructor() {\n    super();\n  }\n  connectedCallback() {\n    this.addEventListener('click', () => {\n      const url = this.getAttribute('update-url');\n      if(!!url){\n        super.updateDOM(url);\n      }\n    });\n  }\n}\ncustomElements.define('filter-value-remove', FilterValueRemove);\n\nclass PaginationNext extends HTMLElement {\n  constructor() {\n    super();\n  }\n  updateDOM(url){\n    const section = this.closest('[data-section-id]');\n    if(!!section) {\n      section.classList.add('loading');\n      const section_id = section.dataset.sectionId;\n      if(!!section_id && !!url){\n        const fetch_url = new URL(url, location.origin);\n        fetch_url.searchParams.set('section_id', section_id); \n        fetch(fetch_url.href, {\n          credentials: 'same-origin',\n          headers: {'X-Requested-With': 'XMLHttpRequest'},\n          method: 'GET'\n        })\n        .then(response => response.text())\n        .then(data => {\n          const template = document.createElement('template');\n          template.innerHTML = data.trim();\n          console.log('handle response TODO', template.content);\n          // TODO\n          // handle response and update\n          section.classList.remove('loading');\n        }).catch(function(err) {\n          section.classList.remove('loading');\n          console.error(err);\n        });\n      }\n    }\n  }\n  connectedCallback() {\n    this.validateItems();\n    this.addEventListener('click', () => {\n      const url = this.getAttribute('paginate-next');\n      if(!!url){\n        this.updateDOM(url);\n      }\n    });\n  }\n}\ncustomElements.define('pagination-next', PaginationNext);"],"names":["$6142fea1849c7fbd$var$FilterValue","HTMLElement","constructor","updateDeepLinking","url","currentURL","URL","location","href","newURL","origin","searchParams","forEach","value","key","includes","set","history","replaceState","updateDOM","section","closest","section_id","dataset","sectionId","classList","add","fetch_url","fetch","credentials","headers","method","then","response","text","data","template","document","createElement","innerHTML","trim","console","log","content","remove","catch","err","error","customElements","define","connectedCallback","updateUrl","getAttribute","fromSlider","querySelector","toSlider","fromInput","toInput","fillSlider","setToggleAccessible","addEventListener","controlFromSlider","bind","controlToSlider","controlFromInput","controlToInput","debounce","handleInput","fn","wait","t","that","args","clearTimeout","setTimeout","apply","range_max","Number","max","min","from","to","getParsed","currentFrom","currentTo","parseInt","sliderColor","rangeColor","controlSlider","rangeDistance","fromPosition","toPosition","style","background","currentTarget","zIndex","$6142fea1849c7fbd$var$PaginationNext","validateItems"],"version":3,"file":"filter.js.map"}