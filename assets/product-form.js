!function(){class e extends HTMLElement{constructor(){super()}connectedCallback(){let e=this.closest("form"),t=this.getAttribute("variant-id"),n=this.getAttribute("product-url");if(e){let i=e.querySelector('[name="id"]'),r=e.querySelector('[name="url"]');this.addEventListener("click",()=>{r.value=n,i.value=t,r.dispatchEvent(new Event("input")),i.dispatchEvent(new Event("input"))})}}}customElements.define("product-option-value",e);class t extends HTMLElement{constructor(){super()}get section(){return this.getAttribute("section")||"product-main"}updateView(){let e=this.querySelector('form [name="url"]'),t=this.querySelector('form [name="id"]'),n=this.querySelector('form [name="selling_plan"]'),i=new URL(location);i.pathname=e.value,t?.value&&i.searchParams.set("variant",t.value),n?.value&&i.searchParams.set("selling_plan",n.value),history.replaceState(null,"",i.href),i.searchParams.set("sections",this.section),this.loading=!0,fetch(i.href).then(e=>e.json()).then(e=>{let t=e[this.section],n=document.createElement("template");n.innerHTML=t.trim();let i=n.content.querySelector("product-form");this.replaceWith(i),this.loading=!1}).catch(e=>{console.error(e),this.loading=!1})}connectedCallback(){let e=this.querySelector('form [name="id"]'),t=this.querySelector('form [name="selling_plan"]');e?.addEventListener("input",this.updateView.bind(this)),t?.addEventListener("input",this.updateView.bind(this))}}customElements.define("product-form",t)}();
//# sourceMappingURL=product-form.js.map
